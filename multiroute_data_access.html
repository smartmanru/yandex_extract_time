<!DOCTYPE html>
<html>
<head>
    <title>Работа с данными и событиями модели мультимаршрута</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <script src="https://yandex.st/jquery/2.2.3/jquery.min.js" type="text/javascript"></script>
    <!--
        Укажите свой API-ключ. Тестовый ключ НЕ БУДЕТ работать на других сайтах.
        Получить ключ можно в Кабинете разработчика: https://developer.tech.yandex.ru/keys/
    -->
    <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU&amp;apikey=f28faff9-aedc-4a57-b89e-238cc0862a5c" type="text/javascript"></script>
    <script src="custom_view.js" type="text/javascript"></script>
    <script src="multiroute_data_access.js" type="text/javascript"></script>
    <style>
        html, body {
            width: 100%; height: 100%; padding: 0; margin: 0;
        }

        #map {
            width: 95%; height: 50%;
        }
        #viewContainer {
            margin: 8px;
        }
    </style>
</head>

<body>
    <div id="map"></div>
    <div id="viewContainer"></div>

        <input type="text" size="40" id="peshkov" value= > 
<button type=button id="send"  onclick="sestr()" value="Click me"  >Send</button>

     <input type="text" size="40" id="m_all" value= > 
<button type=button id="send_m"  onclick="dlina()" value="Click me"  >Send</button>
<script>
function sestr(){
	var str = document.getElementById("viewContainer").innerText;
	var  extkm = str.match(/(\d+)..,/g);
	if (extkm == null)
	{
		console.log("no routes")
	}	
	else
		{
		var  digit = extkm.join();
		console.log(digit);
		var   extdigit = digit.match(/(\d+)/g);
		var sum=0;	
		for(var i=0;i<extdigit.length;i++)
			{
			sum = sum + parseInt(extdigit[i]);
			document.getElementById("peshkov").value = sum;
			document.getElementById('send').click()
			}
		}
}
function dlina()
	{
	var str = document.getElementById("viewContainer").innerText;
	var extkm = str.match(/Время в пути:.+/g);
	var digit = extkm.toString();
	var extdigit = digit.match(/(\d+)/g);
	var extdigit = extdigit.toString();
	console.log(extdigit);
	document.getElementById("m_all").value = extdigit;
	document.getElementById('send_m').click()
}
</script>
</body>
</html>

